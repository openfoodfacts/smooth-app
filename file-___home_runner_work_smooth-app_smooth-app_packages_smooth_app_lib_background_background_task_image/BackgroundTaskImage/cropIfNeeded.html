<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="API docs for the cropIfNeeded method from the BackgroundTaskImage class, for the Dart programming language.">
  <title>cropIfNeeded method - BackgroundTaskImage class - background_task_image library - Dart API</title>


  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  
  <link rel="stylesheet" href="../../static-assets/github.css?v1">
  <link rel="stylesheet" href="../../static-assets/styles.css?v1">
  <link rel="icon" href="../../static-assets/favicon.png?v1">

  
</head>


<body data-base-href="../../" data-using-base-href="false">

<div id="overlay-under-drawer"></div>

<header id="title">
  <button id="sidenav-left-toggle" type="button">&nbsp;</button>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="../../index.html">smooth_app</a></li>
    <li><a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image-library.html">background_task_image</a></li>
    <li><a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/BackgroundTaskImage-class.html">BackgroundTaskImage</a></li>
    <li class="self-crumb">cropIfNeeded method</li>
  </ol>
  <div class="self-name">cropIfNeeded</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<main>


  <div id="dartdoc-main-content" class="main-content">
      <div>
<h1><span class="kind-method">cropIfNeeded</span> method 
    <a href="https://dart.dev/null-safety" class="feature feature-null-safety" title="Supports the null safety language feature.">Null safety</a>
</h1></div>

    <section class="multi-line-signature">
      

<span class="returntype"><a href="https://api.flutter.dev/flutter/dart-async/Future-class.html">Future</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a>?</span>&gt;</span></span>
<span class="name ">cropIfNeeded</span>(<wbr><ol class="parameter-list"><li><span class="parameter" id="cropIfNeeded-param-fullPath">{<span>required</span> <span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a></span> <span class="parameter-name">fullPath</span>, </span></li>
<li><span class="parameter" id="cropIfNeeded-param-croppedPath"><span>required</span> <span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a></span> <span class="parameter-name">croppedPath</span>, </span></li>
<li><span class="parameter" id="cropIfNeeded-param-rotationDegrees"><span>required</span> <span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/int-class.html">int</a></span> <span class="parameter-name">rotationDegrees</span>, </span></li>
<li><span class="parameter" id="cropIfNeeded-param-cropX1"><span>required</span> <span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/int-class.html">int</a></span> <span class="parameter-name">cropX1</span>, </span></li>
<li><span class="parameter" id="cropIfNeeded-param-cropY1"><span>required</span> <span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/int-class.html">int</a></span> <span class="parameter-name">cropY1</span>, </span></li>
<li><span class="parameter" id="cropIfNeeded-param-cropX2"><span>required</span> <span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/int-class.html">int</a></span> <span class="parameter-name">cropX2</span>, </span></li>
<li><span class="parameter" id="cropIfNeeded-param-cropY2"><span>required</span> <span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/int-class.html">int</a></span> <span class="parameter-name">cropY2</span>, </span></li>
<li><span class="parameter" id="cropIfNeeded-param-overlayPainter"><span class="type-annotation">dynamic</span> <span class="parameter-name">overlayPainter</span>}</span></li>
</ol>)

      

    </section>
    
<section class="desc markdown">
  <p>Returns the file path of a crop operation.</p>
<p>Returns directly the original <code>fullPath</code> if no crop operation was needed.
Returns the path of the cropped file if relevant.
Returns null if the image (cropped or not) is too small.</p>
</section>


    
<section class="summary source-code" id="source">
  <h2><span>Implementation</span></h2>
  <pre class="language-dart"><code class="language-dart">static Future&lt;String?&gt; cropIfNeeded({
  required final String fullPath,
  required final String croppedPath,
  required final int rotationDegrees,
  required final int cropX1,
  required final int cropY1,
  required final int cropX2,
  required final int cropY2,
  final CustomPainter? overlayPainter,
}) async {
  final ui.Image full = await loadUiImage(
      await (await BackgroundTaskUpload.getFile(fullPath)).readAsBytes());
  if (cropX1 == 0 &amp;&amp;
      cropY1 == 0 &amp;&amp;
      cropX2 == _cropConversionFactor &amp;&amp;
      cropY2 == _cropConversionFactor &amp;&amp;
      rotationDegrees == 0) {
    if (!isPictureBigEnough(full.width, full.height)) {
      return null;
    }
    &#47;&#47; in that case, no need to crop
    if (overlayPainter == null) {
      return fullPath;
    }
  }

  Size getCroppedSize() {
    final Rect cropRect = getDownsizedRect(cropX1, cropY1, cropX2, cropY2);
    switch (CropRotationExtension.fromDegrees(rotationDegrees)!) {
      case CropRotation.up:
      case CropRotation.down:
        return Size(
          cropRect.width * full.height,
          cropRect.height * full.width,
        );
      case CropRotation.left:
      case CropRotation.right:
        return Size(
          cropRect.width * full.width,
          cropRect.height * full.height,
        );
    }
  }

  final Size croppedSize = getCroppedSize();
  if (!isPictureBigEnough(croppedSize.width, croppedSize.height)) {
    return null;
  }
  final ui.Image cropped = await CropController.getCroppedBitmap(
    crop: getDownsizedRect(cropX1, cropY1, cropX2, cropY2),
    rotation: CropRotationExtension.fromDegrees(rotationDegrees)!,
    image: full,
    maxSize: null,
    quality: FilterQuality.high,
    overlayPainter: overlayPainter,
  );
  await saveJpeg(
    file: await BackgroundTaskUpload.getFile(croppedPath),
    source: cropped,
  );
  return croppedPath;
}</code></pre>
</section>


  </div> <!-- /.main-content -->

  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
  <li><a href="../../index.html">smooth_app</a></li>
  <li><a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image-library.html">background_task_image</a></li>
  <li><a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/BackgroundTaskImage-class.html">BackgroundTaskImage</a></li>
  <li class="self-crumb">cropIfNeeded method</li>
</ol>


    <h5>BackgroundTaskImage class</h5>
    <ol>

        <li class="section-title"><a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/BackgroundTaskImage-class.html#constructors">Constructors</a></li>
          <li><a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/BackgroundTaskImage/BackgroundTaskImage.fromJson.html">fromJson</a></li>


    <li class="section-title">
      <a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/BackgroundTaskImage-class.html#instance-properties">Properties</a>
    </li>
    <li><a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/BackgroundTaskImage/fullPath.html">fullPath</a></li>
    <li class="inherited"><a href="https://api.flutter.dev/flutter/dart-core/Object/hashCode.html">hashCode</a></li>
    <li class="inherited"><a href="https://api.flutter.dev/flutter/dart-core/Object/runtimeType.html">runtimeType</a></li>

    <li class="section-title"><a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/BackgroundTaskImage-class.html#instance-methods">Methods</a></li>
    <li><a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/BackgroundTaskImage/getFloatingMessage.html">getFloatingMessage</a></li>
    <li><a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/BackgroundTaskImage/getProductImageChange.html">getProductImageChange</a></li>
    <li class="inherited"><a href="https://api.flutter.dev/flutter/dart-core/Object/noSuchMethod.html">noSuchMethod</a></li>
    <li><a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/BackgroundTaskImage/postExecute.html">postExecute</a></li>
    <li><a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/BackgroundTaskImage/toJson.html">toJson</a></li>
    <li class="inherited"><a href="https://api.flutter.dev/flutter/dart-core/Object/toString.html">toString</a></li>
    <li><a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/BackgroundTaskImage/upload.html">upload</a></li>

    <li class="section-title"><a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/BackgroundTaskImage-class.html#operators">Operators</a></li>
    <li class="inherited"><a href="https://api.flutter.dev/flutter/dart-core/Object/operator_equals.html">operator ==</a></li>
    <li><a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/BackgroundTaskImage/?.html">operator ?</a></li>



        <li class="section-title"><a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/BackgroundTaskImage-class.html#static-methods">Static methods</a></li>
          <li><a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/BackgroundTaskImage/addTask.html">addTask</a></li>
          <li><a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/BackgroundTaskImage/cropIfNeeded.html">cropIfNeeded</a></li>
          <li><a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/BackgroundTaskImage/getCroppedPath.html">getCroppedPath</a></li>
          <li><a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/BackgroundTaskImage/getDownsizedRect.html">getDownsizedRect</a></li>
          <li><a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/BackgroundTaskImage/getResizedRect.html">getResizedRect</a></li>
          <li><a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/BackgroundTaskImage/getUpsizedRect.html">getUpsizedRect</a></li>
          <li><a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/BackgroundTaskImage/isPictureBigEnough.html">isPictureBigEnough</a></li>
          <li><a href="../../file-___home_runner_work_smooth-app_smooth-app_packages_smooth_app_lib_background_background_task_image/BackgroundTaskImage/loadUiImage.html">loadUiImage</a></li>

</ol>

  </div><!--/.sidebar-offcanvas-->

  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
  </div><!--/.sidebar-offcanvas-->

</main>

<footer>
  <span class="no-break">
    smooth_app
      0.0.0+734
  </span>

  
</footer>



<script src="../../static-assets/highlight.pack.js?v1"></script>
<script src="../../static-assets/docs.dart.js"></script>



</body>

</html>

